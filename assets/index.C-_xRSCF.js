import{r,b as M}from"./index.BLroMeNT.js";import{j as g}from"./jsx-runtime.CLXZXzaL.js";import{b as A,a as S}from"./index.BktVwTTS.js";function _(n,e){const t=r.createContext(e),o=u=>{const{children:c,...d}=u,i=r.useMemo(()=>d,Object.values(d));return g.jsx(t.Provider,{value:i,children:c})};o.displayName=n+"Provider";function s(u){const c=r.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${u}\` must be used within \`${n}\``)}return[o,s]}function L(n,e=[]){let t=[];function o(u,c){const d=r.createContext(c),i=t.length;t=[...t,c];const a=m=>{const{scope:p,children:f,...N}=m,v=p?.[n]?.[i]||d,y=r.useMemo(()=>N,Object.values(N));return g.jsx(v.Provider,{value:y,children:f})};a.displayName=u+"Provider";function l(m,p){const f=p?.[n]?.[i]||d,N=r.useContext(f);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${u}\``)}return[a,l]}const s=()=>{const u=t.map(c=>r.createContext(c));return function(d){const i=d?.[n]||u;return r.useMemo(()=>({[`__scope${n}`]:{...d,[n]:i}}),[d,i])}};return s.scopeName=n,[o,h(s,...e)]}function h(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const o=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(u){const c=o.reduce((d,{useScope:i,scopeName:a})=>{const m=i(u)[`__scope${a}`];return{...d,...m}},{});return r.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}function j(n,e=globalThis?.document){const t=A(n);r.useEffect(()=>{const o=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",o,{capture:!0}),()=>e.removeEventListener("keydown",o,{capture:!0})},[t,e])}var E=globalThis?.document?r.useLayoutEffect:()=>{},P=M.useId||(()=>{}),w=0;function $(n){const[e,t]=r.useState(P());return E(()=>{t(o=>o??String(w++))},[n]),e?`radix-${e}`:""}function C(n,e){return r.useReducer((t,o)=>e[t][o]??t,n)}var O=n=>{const{present:e,children:t}=n,o=R(e),s=typeof t=="function"?t({present:o.isPresent}):r.Children.only(t),u=S(o.ref,T(s));return typeof t=="function"||o.isPresent?r.cloneElement(s,{ref:u}):null};O.displayName="Presence";function R(n){const[e,t]=r.useState(),o=r.useRef({}),s=r.useRef(n),u=r.useRef("none"),c=n?"mounted":"unmounted",[d,i]=C(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const a=x(o.current);u.current=d==="mounted"?a:"none"},[d]),E(()=>{const a=o.current,l=s.current;if(l!==n){const p=u.current,f=x(a);n?i("MOUNT"):f==="none"||a?.display==="none"?i("UNMOUNT"):i(l&&p!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,i]),E(()=>{if(e){let a;const l=e.ownerDocument.defaultView??window,m=f=>{const v=x(o.current).includes(f.animationName);if(f.target===e&&v&&(i("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",a=l.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},p=f=>{f.target===e&&(u.current=x(o.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{l.clearTimeout(a),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else i("ANIMATION_END")},[e,i]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:r.useCallback(a=>{a&&(o.current=getComputedStyle(a)),t(a)},[])}}function x(n){return n?.animationName||"none"}function T(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{O as P,E as a,$ as b,L as c,_ as d,j as u};
